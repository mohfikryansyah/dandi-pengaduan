import{j as e,K as b,r as x,S as M,V as h,m as S}from"./app-1vksEiOn.js";import{c as m,f as P}from"./utils-D17iiBiz.js";import{D as C,a as T,b as B}from"./dialog-BGWq0xld.js";import{u as N,A as v,a as k,b as y}from"./avatar-CCp3Mqh0.js";import{h as n}from"./helpers-xQVhyuEX.js";import{D as I}from"./delete-dialog-o-5PinDr.js";import{C as _,a as w,b as K,c as H}from"./card-B3yooZr5.js";import{f as c,i as o}from"./id-CUEIbMhn.js";import{c as V}from"./index-BVzTNj1Y.js";import{B as j}from"./badge-DRdyMvqN.js";import{A as z}from"./app-layout-DN1uTSLH.js";import F from"./aksi-admin-CKgGtjM8.js";import O from"./aksi-kades-BZ2llhLq.js";import R from"./aksi-kadus-DjVHOOsx.js";import L from"./form-tanggapan-BiZ1oqWF.js";import"./index-BbqicphP.js";import"./index-pTesKFhR.js";import"./Combination-D6pHeosP.js";import"./tslib.es6-BUas5LQb.js";import"./x-BBc_8yfQ.js";import"./createLucideIcon-Dg0TqZCs.js";import"./index-CHJCEIxg.js";import"./index-DdvvDZMX.js";import"./button-Dojzd-UW.js";import"./triangle-alert-C0QSh5mb.js";import"./use-mobile-DGINfj6O.js";import"./index-CQvspDma.js";import"./index-DypZM36f.js";import"./floating-ui.react-dom-CukQGH1T.js";import"./index-Etx5e815.js";import"./check-m_uJjlc8.js";import"./app-logo-icon-4UjUEgNd.js";import"./chevron-right-B5P0Pynj.js";import"./input-error-DrZJb50h.js";import"./label-qmwv9tWL.js";import"./select-PiotuxnN.js";import"./index-DnelQ8Mg.js";import"./chevron-down-c3TOja2F.js";import"./textarea-fcGy8rkE.js";import"./alert-dialog-CSmbaqT6.js";function W({pengaduan:s,className:t}){return e.jsxs("div",{className:m("space-y-0.5",t),children:[e.jsx("div",{className:"flex w-full items-center justify-between",children:e.jsx("h2",{className:"max-w-xl text-xl font-semibold tracking-tight",children:s.judul})}),s.isi&&e.jsx("p",{className:"mt-2 text-sm leading-6 text-gray-600",children:s.isi}),e.jsx("div",{className:"mt-5 flex max-w-xl",children:s.berkas.map((r,d)=>e.jsxs(C,{children:[e.jsx(T,{children:e.jsxs("div",{className:"flex max-w-fit gap-x-2 rounded-lg px-3 py-1.5 hover:bg-gray-100",children:[e.jsx("div",{className:"h-11 w-8 overflow-hidden",children:e.jsx("img",{src:"/storage/"+r.path_berkas,alt:"Berkas"})}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-800",children:["Berkas ",d+1]}),e.jsx("span",{className:"text-sm text-gray-600",children:P(r.size)})]})]})}),e.jsx(B,{className:"overflow-hidden",children:e.jsx("img",{src:"/storage/"+r.path_berkas,alt:"Berkas"})})]},d))})]})}function q({items:s}){const{auth:t}=b().props,r=N(),[d,l]=x.useState(!1),[u,g]=x.useState(!1),[i,p]=x.useState(null),D=a=>{M.delete(route("tanggapan.destroy",{tanggapan:a}),{preserveState:!0,onSuccess:()=>{h.success("Berhasil menghapus tanggapan"),l(!1),p(null)},onError:f=>{h.error(f[0]),p(null),l(!1)}})};return e.jsx("div",{className:"relative space-y-6 border-l-2 border-dashed border-blue-500 pl-6",children:s.map((a,f)=>{const E=c(a.created_at,"EEEE, d MMMM y",{locale:o}),A=c(a.created_at,"HH:mm",{locale:o});return e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute top-1 -left-[31px] h-3 w-3 rounded-full border-2 border-white bg-blue-500"}),e.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[e.jsx("div",{className:"text-sm font-semibold text-blue-600",children:E}),e.jsx("div",{className:"text-xs text-gray-500",children:A})]}),e.jsx(_,{children:e.jsxs(w,{className:"flex gap-4",children:[e.jsxs(v,{className:"h-8 w-8 overflow-hidden rounded-full",children:[e.jsx(k,{src:"/storage/"+a.user.avatar,alt:a.user.name}),e.jsx(y,{className:"rounded-lg bg-neutral-200 text-black dark:bg-neutral-700 dark:text-white",children:r(a.user.name)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold",children:a.user.name}),e.jsx("p",{className:"text-xs text-gray-500",children:a.user.roles})]})}),e.jsx("p",{className:"mt-2 text-sm",children:a.tanggapan})]}),(a.user.id===t.user.id||n(t.user,["admin"]))&&e.jsx(I,{title:"Hapus Pengaduan",isProcessing:d,onDelete:()=>{l(!0),D(a)}},a.id)]})})]},a.id)})})}const G=V("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-background text-foreground",destructive:"text-destructive-foreground [&>svg]:text-current *:data-[slot=alert-description]:text-destructive-foreground/80"}},defaultVariants:{variant:"default"}});function J({className:s,variant:t,...r}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:m(G({variant:t}),s),...r})}function Q({className:s,...t}){return e.jsx("div",{"data-slot":"alert-description",className:m("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",s),...t})}const U=[{title:"Pengaduan",href:route("pengaduan.index")},{title:"Detail Pengaduan",href:"#"}],X={"Menunggu verifikasi":"bg-gray-500 text-gray-100","Diteruskan ke Kepala Dusun":"bg-yellow-500 text-yellow-100","Diverifikasi Kepala Dusun":"bg-blue-500 text-blue-100",Selesai:"bg-green-500 text-green-100",Ditolak:"bg-red-500 text-red-100"};function He({pengaduan:s,kadus_users:t}){const r=c(s.created_at,"EEEE, d MMMM y",{locale:o}),d=c(s.latest_status.created_at,"EEEE, d MMMM y",{locale:o}),l=s.user,u=N(),g=X[s.latest_status.status]??"bg-gray-500 text-white";S({status:s.latest_status.status,tindakan:"",diteruskan_ke:""});const{auth:i}=b().props;return e.jsx(z,{breadcrumbs:U,children:e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:e.jsxs("div",{className:"flex w-full gap-x-5 not-lg:flex-col not-lg:gap-y-3",children:[e.jsxs("div",{className:"w-full max-w-4xl not-lg:order-2",children:[s.latest_status.status==="Selesai"&&e.jsx(J,{className:"mb-3 border-green-500 bg-green-100",children:e.jsx(Q,{className:"justify-center text-gray-800",children:e.jsx("span",{className:"font-bold",children:"Pengaduan telah diselesaikan!"})})}),e.jsx(W,{pengaduan:s,className:"border-b pb-3"}),e.jsx("div",{className:"mt-2 mb-5",children:e.jsx(j,{className:"border border-blue-300 bg-blue-50 text-blue-500",children:"Tanggapan"})}),s.latest_status.status!=="Selesai"&&n(i.user,["admin","kadus_1","kadus_2","kadus_3","kades"])&&e.jsx(L,{pengaduan:s}),s.tanggapans.length>0?e.jsx(q,{items:s.tanggapans}):e.jsx("div",{className:"flex items-center justify-center rounded-2xl border border-dashed py-20",children:e.jsx("p",{className:"text-sm text-gray-500",children:"Tidak ada tanggapan untuk pengaduan ini."})})]}),e.jsxs("div",{className:"w-full space-y-5 lg:max-w-sm",children:[e.jsxs(_,{className:"shadow-none",children:[e.jsx(K,{children:e.jsx(H,{children:"Info Pengaduan"})}),e.jsxs(w,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Status:"}),e.jsx(j,{className:m(g),children:s.latest_status.status})]}),s.latest_status.tindakan&&e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tindakan:"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:s.latest_status.tindakan})]}),e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Diajukan:"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:r})]}),e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pembaruan Terakhir:"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:d})]})]}),n(i.user,["admin","kadus_1","kadus_2","kadus_3"])&&e.jsxs("div",{className:"mt-5 space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:"Pengaduan dari:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(v,{className:"h-8 w-8 overflow-hidden rounded-full",children:[e.jsx(k,{src:"/storage/"+l.avatar,alt:l.name}),e.jsx(y,{className:"rounded-lg bg-neutral-200 text-black dark:bg-neutral-700 dark:text-white",children:u(l.name)})]}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-semibold text-blue-500",children:l.name}),e.jsx("span",{className:"text-muted-foreground truncate text-xs",children:l.email})]})]})]})]})]}),n(i.user,["admin"])&&e.jsx(F,{pengaduan:s,kadus_users:t}),i.user.id===s.diteruskan_ke&&n(i.user,["kadus_1","kadus_2","kadus_3","kadus_4"])&&e.jsx(R,{pengaduan:s}),s.latest_status.status!=="Selesai"&&n(i.user,["kades"])&&e.jsx(O,{pengaduan:s})]})]})})})}export{He as default,X as statusColorMap};

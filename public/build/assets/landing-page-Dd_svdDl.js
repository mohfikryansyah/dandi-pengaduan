import{r as x,j as t}from"./app-DKM7dt8d.js";import{l as L}from"./helpers-CmNvA0sT.js";import{u as E,A as R,a as z,b as Z}from"./avatar-DRnMHcoe.js";import{B as A}from"./badge-CykJfGaV.js";import{B as h}from"./button-Ch5T_YaV.js";import{C as S}from"./calendar-h56rkcBW.js";import{C as b,a as T}from"./card-BcxlMsuI.js";import{I as B}from"./input-Bzxg_iW3.js";import{P as I,a as k,b as M}from"./popover-Bp6cqbEo.js";import{S as H,a as W,b as $,c as V,d as G,e as p}from"./select-tOSno9c3.js";import{t as v,c as J,m as F,a as O,s as X,f as g,i as D}from"./id-CUEIbMhn.js";import{X as q}from"./x-DA2yMRmC.js";import{N as K,F as Q}from"./footer-DiadvXcl.js";import ee from"./hero-section-ByFvL6cG.js";import te from"./statistik-section-19FTcmit.js";import"./index-ZFSzPzMq.js";import"./index-k0HzQP1F.js";import"./index-blviR4P5.js";import"./utils-D17iiBiz.js";import"./index-Vrro_ThI.js";import"./chevron-right-B0WcJHW1.js";import"./createLucideIcon-BecT5Nup.js";import"./chevron-left-CX9-B02W.js";import"./floating-ui.react-dom-BMUpqp2O.js";import"./Combination-ao4a7iry.js";import"./tslib.es6-BUas5LQb.js";import"./index-wGUD2AQ0.js";import"./index-xdR8EGyJ.js";import"./index-Di94R_QD.js";import"./chevron-down-DDfTyICo.js";import"./check-C2k6Q05I.js";import"./use-mobile-DQiCraAI.js";import"./index-CBy6iI--.js";import"./app-logo-icon-QQfq_JEU.js";import"./proxy-DY9_1oir.js";import"./chart--sqcV4ji.js";import"./index-DqSRVZJY.js";function ae(a,e){const s=v(a,e==null?void 0:e.in);return s.setHours(23,59,59,999),s}function U(a,e){const s=()=>J(e==null?void 0:e.in,NaN),l=le(a);let c;if(l.date){const o=ie(l.date,2);c=ce(o.restDateString,o.year)}if(!c||isNaN(+c))return s();const i=+c;let d=0,u;if(l.time&&(d=oe(l.time),isNaN(d)))return s();if(l.timezone){if(u=de(l.timezone),isNaN(u))return s()}else{const o=new Date(i+d),n=v(0,e==null?void 0:e.in);return n.setFullYear(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()),n.setHours(o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),o.getUTCMilliseconds()),n}return v(i+d+u,e==null?void 0:e.in)}const j={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},se=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,re=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,ne=/^([+-])(\d{2})(?::?(\d{2}))?$/;function le(a){const e={},s=a.split(j.dateTimeDelimiter);let r;if(s.length>2)return e;if(/:/.test(s[0])?r=s[0]:(e.date=s[0],r=s[1],j.timeZoneDelimiter.test(e.date)&&(e.date=a.split(j.timeZoneDelimiter)[0],r=a.substr(e.date.length,a.length))),r){const l=j.timezone.exec(r);l?(e.time=r.replace(l[1],""),e.timezone=l[1]):e.time=r}return e}function ie(a,e){const s=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=a.match(s);if(!r)return{year:NaN,restDateString:""};const l=r[1]?parseInt(r[1]):null,c=r[2]?parseInt(r[2]):null;return{year:c===null?l:c*100,restDateString:a.slice((r[1]||r[2]).length)}}function ce(a,e){if(e===null)return new Date(NaN);const s=a.match(se);if(!s)return new Date(NaN);const r=!!s[4],l=f(s[1]),c=f(s[2])-1,i=f(s[3]),d=f(s[4]),u=f(s[5])-1;if(r)return he(e,d,u)?ue(e,d,u):new Date(NaN);{const o=new Date(0);return!xe(e,c,i)||!fe(e,l)?new Date(NaN):(o.setUTCFullYear(e,c,Math.max(l,i)),o)}}function f(a){return a?parseInt(a):1}function oe(a){const e=a.match(re);if(!e)return NaN;const s=N(e[1]),r=N(e[2]),l=N(e[3]);return pe(s,r,l)?s*F+r*O+l*1e3:NaN}function N(a){return a&&parseFloat(a.replace(",","."))||0}function de(a){if(a==="Z")return 0;const e=a.match(ne);if(!e)return 0;const s=e[1]==="+"?-1:1,r=parseInt(e[2]),l=e[3]&&parseInt(e[3])||0;return ge(r,l)?s*(r*F+l*O):NaN}function ue(a,e,s){const r=new Date(0);r.setUTCFullYear(a,0,4);const l=r.getUTCDay()||7,c=(e-1)*7+s+1-l;return r.setUTCDate(r.getUTCDate()+c),r}const me=[31,null,31,30,31,30,31,31,30,31,30,31];function P(a){return a%400===0||a%4===0&&a%100!==0}function xe(a,e,s){return e>=0&&e<=11&&s>=1&&s<=(me[e]||(P(a)?29:28))}function fe(a,e){return e>=1&&e<=(P(a)?366:365)}function he(a,e,s){return e>=1&&e<=53&&s>=0&&s<=6}function pe(a,e,s){return a===24?e===0&&s===0:s>=0&&s<60&&e>=0&&e<60&&a>=0&&a<25}function ge(a,e){return e>=0&&e<=59}function De({items:a}){const e=E(),[s,r]=x.useState(""),[l,c]=x.useState(5),[i,d]=x.useState({search:"",startDate:null,endDate:null,status:""});x.useEffect(()=>{const n=setTimeout(()=>{d(m=>({...m,search:s}))},500);return()=>clearTimeout(n)},[s]),x.useEffect(()=>{c(5)},[i]);const u=a.filter(n=>{const m=n.judul.toLowerCase().includes(i.search.toLowerCase()),Y=i.status?n.latest_status.status===i.status:!0,y=new Date(n.created_at),w=i.startDate?X(new Date(i.startDate)):null,C=i.endDate?ae(new Date(i.endDate)):null,_=(!w||y>=w)&&(!C||y<=C);return m&&Y&&_}),o=()=>{d({search:"",startDate:null,endDate:null,status:""}),r("")};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"mb-4 mt-6 max-w-3xl items-center gap-2 not-md:space-y-2 md:flex",children:[t.jsx(B,{placeholder:"Cari pengaduan...",className:"text-sm",value:s,onChange:n=>r(n.target.value)}),t.jsxs(I,{children:[t.jsx(k,{asChild:!0,children:t.jsx(h,{className:"not-md:w-full",variant:"outline",children:i.startDate?g(U(i.startDate),"d MMM yyyy",{locale:D}):"Dari Tanggal"})}),t.jsx(M,{className:"w-auto p-0",align:"start",children:t.jsx(S,{mode:"single",selected:i.startDate?new Date(i.startDate):void 0,onSelect:n=>d(m=>({...m,startDate:n?n.toISOString():null}))})})]}),t.jsxs(I,{children:[t.jsx(k,{asChild:!0,children:t.jsx(h,{className:"not-md:w-full",variant:"outline",children:i.endDate?g(U(i.endDate),"d MMM yyyy",{locale:D}):"Sampai Tanggal"})}),t.jsx(M,{className:"w-auto p-0",align:"start",children:t.jsx(S,{mode:"single",selected:i.endDate?new Date(i.endDate):void 0,onSelect:n=>d(m=>({...m,endDate:n?n.toISOString():null}))})})]}),t.jsxs(H,{value:i.status,onValueChange:n=>d(m=>({...m,status:n})),children:[t.jsx(W,{className:"md:w-[300px]",children:t.jsx($,{placeholder:"Pilih status",className:"whitespace-normal"})}),t.jsx(V,{children:t.jsxs(G,{children:[t.jsx(p,{value:"Diajukan",children:"Diajukan"}),t.jsx(p,{value:"Diproses",children:"Diproses"}),t.jsx(p,{value:"Selesai",children:"Selesai"}),t.jsx(p,{value:"Ditolak",children:"Ditolak"})]})})]}),(i.search||i.endDate||i.startDate||i.status)&&t.jsxs(h,{onClick:o,variant:"ghost",children:[t.jsx(q,{}),"Reset"]})]}),u.length>0?t.jsxs(t.Fragment,{children:[u.slice(0,l).map(n=>t.jsx(b,{className:"mb-4",children:t.jsxs(T,{children:[t.jsxs("div",{className:"items-center justify-between not-md:space-y-3 md:flex",children:[t.jsx("div",{className:"flex gap-2",children:t.jsx(A,{className:"bg-sky-800",children:n.latest_status.status})}),t.jsxs("div",{className:"gap-4 text-sm text-gray-700 md:flex",children:[t.jsxs("p",{children:["Dibuat: ",g(n.created_at,"EEEE, d MMMM y",{locale:D})]}),t.jsxs("p",{children:["Pembaruan:"," ",g(n.latest_status.created_at,"EEEE, d MMMM y",{locale:D})]})]})]}),t.jsxs("div",{className:"mt-6 border-b pb-4",children:[t.jsx("h1",{className:"text-xl font-semibold text-blue-500",children:n.judul}),t.jsx("p",{className:"mt-2 text-sm leading-6 text-gray-600",children:L(n.isi,300)})]}),t.jsx("div",{className:"mt-4 flex items-center justify-between",children:t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("p",{className:"text-sm text-gray-700",children:"Pengaduan dari:"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(R,{className:"h-8 w-8 overflow-hidden rounded-full",children:[t.jsx(z,{src:"/storage/"+n.user.avatar,alt:n.user.name}),t.jsx(Z,{className:"rounded-lg bg-neutral-200 text-black dark:bg-neutral-700 dark:text-white",children:e(n.user.name)})]}),t.jsx("div",{className:"grid flex-1 items-center text-left text-sm leading-tight",children:t.jsx("span",{className:"truncate font-semibold text-blue-500",children:n.user.name})})]})]})})]})},n.id)),l<u.length&&t.jsx("div",{className:"mt-6 flex justify-center",children:t.jsx(h,{onClick:()=>c(n=>n+5),variant:"outline",children:"Lihat Lebih Banyak"})})]}):t.jsx(b,{className:"border-dashed py-10 shadow-none",children:t.jsx(T,{className:"flex items-center justify-center text-gray-500",children:"Tidak ada data ditemukan"})})]})}function je({children:a}){return t.jsxs("div",{className:"flex flex-col flex-1 h-full w-full",children:[t.jsx(K,{}),a]})}function st({pengaduans:a,chartData:e,countAllPengaduan:s,countPengaduanDiproses:r,countPengaduanSelesai:l}){return E(),t.jsx(je,{children:t.jsxs("div",{className:"flex h-full w-full flex-1 flex-col",children:[t.jsx(ee,{}),t.jsx(te,{data:{chartData:e,countAllPengaduan:s,countPengaduanDiproses:r,countPengaduanSelesai:l}}),t.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col p-4 py-20",children:[t.jsx("h1",{className:"md:text-4xl text-3xl font-semibold text-gray-800",children:"Daftar Pengaduan Umum"}),t.jsx(De,{items:a})]}),t.jsx(Q,{})]})})}export{st as default};
